const TabPersosRecherche = [
    { prenom: "Gon", nom: "Freecss", image: "../../Ressources/Personnages/gon.webp", citation: "Si vous mentez, ce sera facile pour moi. Je n'aurai aucune pitié à vous montrer. Je peux te vaincre sans hésitation." },
    { prenom: "Kirua", nom: "Zoldik", image: "../../Ressources/Personnages/kirua.webp", citation: "Quand je dis que ça ne me fait pas mal, ça veut dire que je peux le supporter." },
    { prenom: "Kurapika", nom: "", image: "../../Ressources/Personnages/kurapika.jpg", citation: "Il y a deux choses que les collectionneurs veulent toujours. Le premier est tout élément d'extrême rareté. Le second, ce sont des collègues auprès desquels ils peuvent se vanter de leur collection." },
    { prenom: "Leolio", nom: "Paradinaito", image: "../../Ressources/Personnages/leolio.webp", citation: "Pour le juste prix, vous pouvez acheter non seulement des trésors, mais des rêves, des cœurs et même la vie des gens !" },
    // Examen Hunter
    { prenom: "Hisoka", nom: "Morow", image: "../../Ressources/Personnages/hisoka.jpg", citation: "L'amour et la haine sont les deux faces d'une même médaille." },
    { prenom: "Irumi", nom: "Zoldik", image: "../../Ressources/Personnages/irumi.jpg", citation: "Dans les rares cas où quelqu'un survit, il devient invalide." },
    // Famille Zoldik
    { prenom: "Silva", nom: "Zoldik", image: "../../Ressources/Personnages/silva.jpg", citation: "En tant que père, tu es plus précieux pour moi que la promesse que je t'ai faite." },
    { prenom: "Zeno", nom: "Zoldik", image: "../../Ressources/Personnages/zeno.jpg", citation: "J’aurais pu t’écraser seul ça ne fait aucun doute. Sauf que si tu t’étais donné la peine de te battre sérieusement dans ce cas tu aurais certainement pu me vaincre. Mais... tu n’es qu’un sale petit garnement." },
    { prenom: "Karuto", nom: "Zoldik", image: "../../Ressources/Personnages/karuto.webp", citation: "Je dois corriger cela ... Cette mauvaise habitude de torturer ma proie." },
    { prenom: "Aruka", nom: "Zoldik", image: "../../Ressources/Personnages/aruka.jpg", citation: "Penses-tu que je ne devrais pas être ici ? La famille serait-elle mieux sans moi ? Est-ce que vous vous entendriez tous mieux ?" },
    // York Shin City
    { prenom: "Nobunaga", nom: "Hazama", image: "../../Ressources/Personnages/nobunaga.webp", citation: "Uvo... n'est pas stupide. Même s'il est surpassé, il peut se débrouiller lui-même." },
    { prenom: "Feitan", nom: "Portor", image: "../../Ressources/Personnages/feitan.jpg", citation: "Une famille ? Qu'est-ce que c'est ?" },
    { prenom: "Machi", nom: "Komachine", image: "../../Ressources/Personnages/machi.jpg", citation: "L'obscurité ne cachera pas toute cette soif de sang. D'ailleurs, vous devriez viser le nerf, bien que je vous bloque de toute façon." },
    { prenom: "Phinks", nom: "Magkav", image: "../../Ressources/Personnages/phinks.jpg", citation: "Dites où ils sont, Pakunoda. Nous tuerons les deux brèches et nous irons tuer la chaîne mec." },
    { prenom: "Sharnalk", nom: "Ryusei", image: "../../Ressources/Personnages/sharnalk.jpg", citation: "C'est pourquoi je déteste ce mode, même s'il est si puissant. La réaction est mauvaise et je ne me souviens plus de quoi que ce soit. Je ne ressens jamais un sentiment d'accomplissement." },
    { prenom: "Franklin", nom: "Bordeaux", image: "../../Ressources/Personnages/franklin.jpg", citation: "Le pire cas est que nous mourons tous. La fin des araignées." },
    { prenom: "Shizuku", nom: "Murasaki", image: "../../Ressources/Personnages/shizuku.webp", citation: "Rejeter les règles, c'est rejeter l'araignée elle-même et par conséquent, rejeter le leader. Et je ne veux pas faire ça." },
    { prenom: "Pakunoda", nom: "", image: "../../Ressources/Personnages/pakunoda.webp", citation: "Kuroro, nous avons toujours besoin de vous... même si cela signifie trahir les araignées." },
    { prenom: "Uvoguine", nom: "", image: "../../Ressources/Personnages/uvoguine.jpeg", citation: "Au début, je voulais simplement essayer pour voir. Mais il y a une différence entre avoir envie d'essayer un truc par curiosité et vraiment vouloir faire ce truc." },
    // Greed Island
    { prenom: "Biscuit", nom: "Kruger", image: "../../Ressources/Personnages/biscuit.png", citation: "Il y a des menteurs qui ne mentent que lorsqu'il y a une raison de le faire, et il y a des menteurs qui mentent aussi sans raison." },
    { prenom: "Genthru", nom: "", image: "../../Ressources/Personnages/genthru.jpg", citation: "Je préférerais ne pas faire ça. Je t'ai vu en action et tu as du talent et du potentiel. Votre fierté vaut-elle vraiment la peine de jeter tout ça ?" },
    { prenom: "Rasor", nom: "", image: "../../Ressources/Personnages/rasor.webp", citation: "Ce n'est pas seulement éviter et attraper. Pas que cela soit utile." },
    // Kimera Ants
    { prenom: "Kaito", nom: "", image: "../../Ressources/Personnages/kaito.jpg", citation: "Tous les bons Hunters s'entendent bien avec les animaux." },
    { prenom: "Neferupito", nom: "", image: "../../Ressources/Personnages/neferupito.jpg", citation: "Vous avez respecté mes souhaits et m'attendiez. Je pense donc que je devrais au moins être honnête avec toi. Cet homme est déjà mort. Il est mort quand je l'ai combattu. Oui. Maintenant je me souviens de lui." },
    { prenom: "Montutyupi", nom: "", image: "../../Ressources/Personnages/montutyupi.jpg", citation: "La meilleure façon de servir le Roi est de contrôler cette fureur sans être consumé par l'émotion. Cela conduira directement à l'élimination de ces parasites." },
    { prenom: "Shauapufu", nom: "", image: "../../Ressources/Personnages/shauapufu.jpg", citation: "Ils sont tous ici pour vous. Ils vous appartiennent tous. Vous régnerez sur ces masses ignorantes et vous vous en placerez au sommet de la chaîne alimentaire. Le monde entier brillera sous votre lumière glorieuse. C'est votre destin divin." },
    { prenom: "Komugi", nom: "", image: "../../Ressources/Personnages/komugi.jpg", citation: "Ai-je le droit d'être aussi heureuse ? Est-ce que tant de choses merveilleuses peuvent arriver à quelqu'un comme moi ?" },
    { prenom: "Meleoron", nom: "", image: "../../Ressources/Personnages/meleoron.jpg", citation: "Le Roi a tué quelqu'un qui voulait beaucoup dire pour moi. Il s'appelait Peggy. Sa tête a été soufflée devant mes yeux. Mais je... Je n'avais même pas réalisé que quelqu'un de mon entourage était mort." },
    { prenom: "Djido", nom: "", image: "../../Ressources/Personnages/djido.jpg", citation: "Hé, regarde ici. Atteignez-moi et touchez-moi, j'ose ça. Lèpre-toi. Ooh, regarde à quel point je suis proche." },
    { prenom: "Morau", nom: "McCarnathy", image: "../../Ressources/Personnages/morau.jpg", citation: "Toujours se battre comme si vous étiez confiant à 100%, vous gagnerez." },
    { prenom: "Nov", nom: "", image: "../../Ressources/Personnages/nov.jpg", citation: "Les gens ont tendance à surévaluer les choses qu'ils ne comprennent pas." },
    { prenom: "Knuckle", nom: "Bine", image: "../../Ressources/Personnages/knuckle.jpg", citation: "Je ne peux plus le voir comme quelque chose à exterminer." },
    { prenom: "Shoot", nom: "MacMahon", image: "../../Ressources/Personnages/shoot.jpg", citation: "Je n'aime pas blesser les gens... mais... vous m'avez montré deux fois qu'il y a des moments où vous devez vous battre, par respect." },
    { prenom: "Pamu", nom: "Shiberia", image: "../../Ressources/Personnages/pamu.jpg", citation: "Nous sommes cruels. Nous devons l'être. Nous ne sommes pas différents des fourmis. En fait, nous pouvons être bien pires." },
    // Elections
    { prenom: "Ging", nom: "Freecss", image: "../../Ressources/Personnages/ging.jpg", citation: "Des excuses sont une promesse de faire les choses différemment la prochaine fois et de tenir la promesse." },
    { prenom: "Pariston", nom: "Hill", image: "../../Ressources/Personnages/pariston.jpg", citation: "Si votre association devient ennuyeuse... la prochaine fois, je tirerai votre jambe pour de vrai." }
];

const TabPersosCitation = [
    { prenom: "Gon", nom: "Freecss", image: "../../Ressources/Personnages/gon.webp", citation: "Si vous mentez, ce sera facile pour moi. Je n'aurai aucune pitié à vous montrer. Je peux te vaincre sans hésitation." },
    { prenom: "Kirua", nom: "Zoldik", image: "../../Ressources/Personnages/kirua.webp", citation: "Quand je dis que ça ne me fait pas mal, ça veut dire que je peux le supporter." },
    { prenom: "Kurapika", nom: "", image: "../../Ressources/Personnages/kurapika.jpg", citation: "Il y a deux choses que les collectionneurs veulent toujours. Le premier est tout élément d'extrême rareté. Le second, ce sont des collègues auprès desquels ils peuvent se vanter de leur collection." },
    { prenom: "Leolio", nom: "Paradinaito", image: "../../Ressources/Personnages/leolio.webp", citation: "Pour le juste prix, vous pouvez acheter non seulement des trésors, mais des rêves, des cœurs et même la vie des gens !" },
    // Examen Hunter
    { prenom: "Hisoka", nom: "Morow", image: "../../Ressources/Personnages/hisoka.jpg", citation: "L'amour et la haine sont les deux faces d'une même médaille." },
    { prenom: "Irumi", nom: "Zoldik", image: "../../Ressources/Personnages/irumi.jpg", citation: "Dans les rares cas où quelqu'un survit, il devient invalide." },
    // Famille Zoldik
    { prenom: "Silva", nom: "Zoldik", image: "../../Ressources/Personnages/silva.jpg", citation: "En tant que père, tu es plus précieux pour moi que la promesse que je t'ai faite." },
    { prenom: "Zeno", nom: "Zoldik", image: "../../Ressources/Personnages/zeno.jpg", citation: "J’aurais pu t’écraser seul ça ne fait aucun doute. Sauf que si tu t’étais donné la peine de te battre sérieusement dans ce cas tu aurais certainement pu me vaincre. Mais... tu n’es qu’un sale petit garnement." },
    { prenom: "Karuto", nom: "Zoldik", image: "../../Ressources/Personnages/karuto.webp", citation: "Je dois corriger cela ... Cette mauvaise habitude de torturer ma proie." },
    { prenom: "Aruka", nom: "Zoldik", image: "../../Ressources/Personnages/aruka.jpg", citation: "Penses-tu que je ne devrais pas être ici ? La famille serait-elle mieux sans moi ? Est-ce que vous vous entendriez tous mieux ?" },
    // York Shin City
    { prenom: "Nobunaga", nom: "Hazama", image: "../../Ressources/Personnages/nobunaga.webp", citation: "Uvo... n'est pas stupide. Même s'il est surpassé, il peut se débrouiller lui-même." },
    { prenom: "Feitan", nom: "Portor", image: "../../Ressources/Personnages/feitan.jpg", citation: "Une famille ? Qu'est-ce que c'est ?" },
    { prenom: "Machi", nom: "Komachine", image: "../../Ressources/Personnages/machi.jpg", citation: "L'obscurité ne cachera pas toute cette soif de sang. D'ailleurs, vous devriez viser le nerf, bien que je vous bloque de toute façon." },
    { prenom: "Phinks", nom: "Magkav", image: "../../Ressources/Personnages/phinks.jpg", citation: "Dites où ils sont, Pakunoda. Nous tuerons les deux brèches et nous irons tuer la chaîne mec." },
    { prenom: "Sharnalk", nom: "Ryusei", image: "../../Ressources/Personnages/sharnalk.jpg", citation: "C'est pourquoi je déteste ce mode, même s'il est si puissant. La réaction est mauvaise et je ne me souviens plus de quoi que ce soit. Je ne ressens jamais un sentiment d'accomplissement." },
    { prenom: "Franklin", nom: "Bordeaux", image: "../../Ressources/Personnages/franklin.jpg", citation: "Le pire cas est que nous mourons tous. La fin des araignées." },
    { prenom: "Shizuku", nom: "Murasaki", image: "../../Ressources/Personnages/shizuku.webp", citation: "Rejeter les règles, c'est rejeter l'araignée elle-même et par conséquent, rejeter le leader. Et je ne veux pas faire ça." },
    { prenom: "Pakunoda", nom: "", image: "../../Ressources/Personnages/pakunoda.webp", citation: "Kuroro, nous avons toujours besoin de vous... même si cela signifie trahir les araignées." },
    { prenom: "Uvoguine", nom: "", image: "../../Ressources/Personnages/uvoguine.jpeg", citation: "Au début, je voulais simplement essayer pour voir. Mais il y a une différence entre avoir envie d'essayer un truc par curiosité et vraiment vouloir faire ce truc." },
    // Greed Island
    { prenom: "Biscuit", nom: "Kruger", image: "../../Ressources/Personnages/biscuit.png", citation: "Il y a des menteurs qui ne mentent que lorsqu'il y a une raison de le faire, et il y a des menteurs qui mentent aussi sans raison." },
    { prenom: "Genthru", nom: "", image: "../../Ressources/Personnages/genthru.jpg", citation: "Je préférerais ne pas faire ça. Je t'ai vu en action et tu as du talent et du potentiel. Votre fierté vaut-elle vraiment la peine de jeter tout ça ?" },
    { prenom: "Rasor", nom: "", image: "../../Ressources/Personnages/rasor.webp", citation: "Ce n'est pas seulement éviter et attraper. Pas que cela soit utile." },
    // Kimera Ants
    { prenom: "Kaito", nom: "", image: "../../Ressources/Personnages/kaito.jpg", citation: "Tous les bons Hunters s'entendent bien avec les animaux." },
    { prenom: "Neferupito", nom: "", image: "../../Ressources/Personnages/neferupito.jpg", citation: "Vous avez respecté mes souhaits et m'attendiez. Je pense donc que je devrais au moins être honnête avec toi. Cet homme est déjà mort. Il est mort quand je l'ai combattu. Oui. Maintenant je me souviens de lui." },
    { prenom: "Montutyupi", nom: "", image: "../../Ressources/Personnages/montutyupi.jpg", citation: "La meilleure façon de servir le Roi est de contrôler cette fureur sans être consumé par l'émotion. Cela conduira directement à l'élimination de ces parasites." },
    { prenom: "Shauapufu", nom: "", image: "../../Ressources/Personnages/shauapufu.jpg", citation: "Ils sont tous ici pour vous. Ils vous appartiennent tous. Vous régnerez sur ces masses ignorantes et vous vous en placerez au sommet de la chaîne alimentaire. Le monde entier brillera sous votre lumière glorieuse. C'est votre destin divin." },
    { prenom: "Komugi", nom: "", image: "../../Ressources/Personnages/komugi.jpg", citation: "Ai-je le droit d'être aussi heureuse ? Est-ce que tant de choses merveilleuses peuvent arriver à quelqu'un comme moi ?" },
    { prenom: "Meleoron", nom: "", image: "../../Ressources/Personnages/meleoron.jpg", citation: "Le Roi a tué quelqu'un qui voulait beaucoup dire pour moi. Il s'appelait Peggy. Sa tête a été soufflée devant mes yeux. Mais je... Je n'avais même pas réalisé que quelqu'un de mon entourage était mort." },
    { prenom: "Djido", nom: "", image: "../../Ressources/Personnages/djido.jpg", citation: "Hé, regarde ici. Atteignez-moi et touchez-moi, j'ose ça. Lèpre-toi. Ooh, regarde à quel point je suis proche." },
    { prenom: "Morau", nom: "McCarnathy", image: "../../Ressources/Personnages/morau.jpg", citation: "Toujours se battre comme si vous étiez confiant à 100%, vous gagnerez." },
    { prenom: "Nov", nom: "", image: "../../Ressources/Personnages/nov.jpg", citation: "Les gens ont tendance à surévaluer les choses qu'ils ne comprennent pas." },
    { prenom: "Knuckle", nom: "Bine", image: "../../Ressources/Personnages/knuckle.jpg", citation: "Je ne peux plus le voir comme quelque chose à exterminer." },
    { prenom: "Shoot", nom: "MacMahon", image: "../../Ressources/Personnages/shoot.jpg", citation: "Je n'aime pas blesser les gens... mais... vous m'avez montré deux fois qu'il y a des moments où vous devez vous battre, par respect." },
    { prenom: "Pamu", nom: "Shiberia", image: "../../Ressources/Personnages/pamu.jpg", citation: "Nous sommes cruels. Nous devons l'être. Nous ne sommes pas différents des fourmis. En fait, nous pouvons être bien pires." },
    // Elections
    { prenom: "Ging", nom: "Freecss", image: "../../Ressources/Personnages/ging.jpg", citation: "Des excuses sont une promesse de faire les choses différemment la prochaine fois et de tenir la promesse." },
    { prenom: "Pariston", nom: "Hill", image: "../../Ressources/Personnages/pariston.jpg", citation: "Si votre association devient ennuyeuse... la prochaine fois, je tirerai votre jambe pour de vrai." }
];


const inputSearch = document.querySelector('.input-recherche');
const suggestionSearch = document.querySelector(".suggestion-recherche");
const comparaison = document.querySelector(".comparaison");
const persoADeviner = TabPersosCitation[Math.floor(Math.random() * TabPersosCitation.length)];

let persoPropose = null;

// Affichage du citation 
const t2Element = document.querySelector('.consigne-t2');
if (t2Element) {
    t2Element.textContent = `" ${persoADeviner.citation} "`;
}


function afficherSuggestion(PersonnagesFiltre) {
  suggestionSearch.innerHTML = ""; // Réinitialiser les suggestions
  
  PersonnagesFiltre.forEach((perso) => {
    // Création de l'élément
    const item = document.createElement("button");
    item.classList.add("suggestion-item");
    item.innerHTML = `<img class="suggestion-item-img" src="${perso.image}">
                      <span>${perso.prenom}</span>
                      <span>&nbsp;${perso.nom}</span>`;
  
    // Ajout dans le DOM
    suggestionSearch.appendChild(item);
  
    // Suppression dans suggestion-recherche + TabPersosRecherche
    item.addEventListener("click", () => {
      // Trouver le personnage correspondant
      persoPropose = TabPersosCitation.find(p => p.prenom === perso.prenom);
      
      if (persoPropose) {
        // Supprimer le personnage de TabPersosRecherche
        const index = TabPersosRecherche.findIndex(p => p.prenom === perso.prenom);
        if (index !== -1) {
            TabPersosRecherche.splice(index, 1);
        }
        item.remove();
      }
    }) 
  })
}
  
inputSearch.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
        const premierItem = document.querySelector(".suggestion-item");
        if (premierItem) {
            premierItem.click();
        }
    }
})
  
inputSearch.addEventListener("input", () => {
    const requete = inputSearch.value.toLowerCase().trim();
  
    if (requete === "") {
        afficherSuggestion([]); // Cacher les suggestions si recherche vide
        return;
    }
  
    const filtre = TabPersosRecherche.filter((perso) => {
        const prenom = perso.prenom.toLowerCase();
        const nom = perso.nom.toLowerCase();
        return prenom.startsWith(requete) || nom.startsWith(requete);
    });
  
    suggestionSearch.style.display = filtre.length > 0 ? "block" : "none";
    afficherSuggestion(filtre);
});
  
function afficherComparaison(persoPropose, persoADeviner) {

    let couleur = persoPropose.prenom === persoADeviner.prenom ? "green" : "red";

    let tableauHTML = `
        <div class="comparaison-item" style="background-color: ${couleur}; box-shadow: 0 1px 15px ${couleur}, inset 0 0 10px rgba(255, 255, 255, 0.47)">
            <img class="comparaison-img" src="${persoPropose.image}"> 
            <span class="comparaison-text" >${persoPropose.prenom} ${persoPropose.nom}</span>
        </div>`;
  
    comparaison.innerHTML = tableauHTML + comparaison.innerHTML;
}
  
function Victoire() {
    inputSearch.disabled = true; // Désactiver l'input pour bloquer le jeu
  
    // Créer un message de victoire
    const conteneur = document.createElement('div');
    conteneur.classList.add('conteneur3');
    const messageVictoire = document.createElement('div');
    messageVictoire.classList.add('victoire');
  
    // Ajouter le texte principal
    const textePrincipal = document.createElement('p');
    textePrincipal.textContent = "Il est trop chaud ! 🎉";
    textePrincipal.classList.add('victoire-t1');
  
    // Ajouter le message secondaire (t2)
    const messageRejouer = document.createElement('p');
    messageRejouer.textContent = "Pour rejouer, il suffit juste d'actualiser la page.";
    messageRejouer.classList.add('victoire-t2');
  
    messageVictoire.appendChild(textePrincipal);
    messageVictoire.appendChild(messageRejouer);
    conteneur.appendChild(messageVictoire);

    // Ajouter la div complète au body
    document.querySelector('body').appendChild(conteneur);
}
// Gestionnaire d'événements sur le conteneur parent
suggestionSearch.addEventListener("click", (e) => {
    // Vérifie si l'élément cliqué est un élément .suggestion-item ou contenu dans un tel élément
    const item = e.target.closest(".suggestion-item");
    if (!item) return; // Si ce n'est pas un élément .suggestion-item, on ignore l'événement
    
    // Récupère le prénom et le nom depuis l'élément cliqué
    const prenom = item.querySelector("span:nth-child(2)").textContent.trim().toLowerCase();
    // Trouve le personnage correspondant
    persoPropose = TabPersosCitation.find(perso => perso.prenom.toLowerCase() === prenom);
    if (persoPropose) {
        suggestionSearch.style.display = "none";
        afficherComparaison(persoPropose, persoADeviner);
        inputSearch.value = "";
        inputSearch.focus();
        if (persoPropose.prenom === persoADeviner.prenom) {
            document.querySelector('.comparaison-item').style.animation = "none";
            setTimeout(() => {
                Victoire(); // Appel de la fonction après le délai
            }, 50); // Délai
        }
    }
})
    